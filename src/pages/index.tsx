import type { NextPage } from "next";
import Head from "next/head";
import { Wrapper } from "../ui/components/PageComponent/Wrapper/Wrapper";
import { Header } from "../ui/components/Header/Header";
import { AccentButton } from "../ui/components/AccentButton/AccentButton";
import Link from "next/link";
import {
  Accent,
  AccentText,
  AccentLink,
  Content,
  ContentText,
  Heading,
  Main,
  TeamImage,
} from "../ui/styles/pages/index.style";
import { BackgroundEffect } from "../ui/components/BackgroundEffect/BackgroundEffect";
import { CenterContent } from "../ui/components/CenterContent/CenterContent";
import { contentMainPageInfo, getMainPageInfo } from "../lib/mainPage";
import reactHTMLParser from "react-html-parser";

const Home: NextPage<{ data: contentMainPageInfo }> = ({ data }) => {
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Main>
        <Header forPreviewPage={true} />
        <BackgroundEffect forPreview={true} />
        <CenterContent>
          <Wrapper>
            <Content>
              <ContentText>
                <Heading
                  initial={{ opacity: 0, x: -50 }}
                  animate={{ opacity: 1, x: 0 }}
                  transition={{ duration: 1 }}
                >
                  {reactHTMLParser(data.heading)}
                </Heading>
                <Accent
                  initial={{ opacity: 0, x: -50 }}
                  animate={{ opacity: 1, x: 0 }}
                  transition={{ duration: 1, delay: 0.7 }}
                >
                  <Link href={"/command/"}>
                    <AccentLink>
                      <AccentButton title={"Узнать подробнее"} />
                    </AccentLink>
                  </Link>
                  <AccentText>{reactHTMLParser(data.accent)}</AccentText>
                </Accent>
              </ContentText>
              <TeamImage
                initial={{ opacity: 0, y: -100 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 1, delay: 0.4 }}
              >
                <img
                  src={"/images/it-animals.svg"}
                  width={"100%"}
                  height={"100%"}
                />
              </TeamImage>
            </Content>
          </Wrapper>
        </CenterContent>
      </Main>
    </>
  );
};

export async function getStaticProps() {
  // Получение и прокидывание данных перед самой сборкой статики
  const data = getMainPageInfo();
  return {
    props: {
      data,
    },
  };
}

export default Home;
